---
title: "First hands-on for the DMI course"
author: "Wael Badr and Xareni Reyes Soto"
date: "Last update: `r format(Sys.time(), '%d %B, %Y')`"      
output:
  html_document:
    toc: true
    fig_caption: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


# Analysis of the Heart Disease Dataset 
Load the data from
[here](https://raw.githubusercontent.com/jpinero/DMI_2021/main/datasets/heart_disease_dataset.csv), and the description is [here](https://raw.githubusercontent.com/jpinero/DMI_2021/main/datasets/heart_disease_description.txt). 
The original dataset comes from [here](https://archive.ics.uci.edu/ml/datasets/Heart+Disease) and corresponds to the [processed cleveland data](https://archive.ics.uci.edu/ml/machine-learning-databases/heart-disease/processed.cleveland.data)

## Perform an EDA on the dataset

```{r}
library(outliers)
## 1- Read the table
d <- read.table("/home/xrs/projects-ubuntu/MBI_data_mining/assignment-1-xreyesso/data/heart_disease_dataset.csv", header=T, sep="\t")

# Load the raw data
file_path <- "/home/xrs/projects-ubuntu/MBI_data_mining/assignment-1-xreyesso/data/heart_disease_dataset.csv"
raw_data <- readLines(file_path)

# Split the data
processed_data <- strsplit(raw_data, "\\s+")

# Convert to data frame
data_frame <- do.call(rbind, processed_data) # This turns the data into a matrix
data_frame <- as.data.frame(data_frame) # Change the type to data frame

# Set the first row as column names
colnames(data_frame) <- data_frame[1,] # Use the first row as column names
data_frame <- data_frame[-1, ]                # Remove the first row from the data

# Rearrange the data so that the last column (patient_id) is now the first
data_frame <- data_frame[, c(ncol(data_frame), 1:(ncol(data_frame) - 1))]

# Convert the data of columns to numeric to use the outlier function
data_frame$chol <- as.numeric(as.character(data_frame$chol))
data_frame$trestbps <- as.numeric(as.character(data_frame$trestbps))

outlier(data_frame$chol)
outlier(data_frame$trestbps)
```


## Create visualizations in order to show which variables seem to be more associated with heart disease

```{r}

```


# 2 Difference in mortality rates in hospitalized COVID-19 patients 
Using the supplementary material from the [Difference in mortality rates in hospitalized COVID-19 patients identified by cytokine profile clustering using a machine learning approach: An outcome prediction alternative](https://www.frontiersin.org/articles/10.3389/fmed.2022.987182/full), perform the following tasks

## Reproduce Figure 1 from the publication

```{r}
library(readxl)
library(ggplot2)
table <- read_excel("/home/xrs/Documents/02_DMI/Hands-on_1/Table 1.XLSX") 

ggplot(data = table, mapping = aes(x=Age)) +
  geom_histogram(binwidth = 10, color = "black", fill = "skyblue")

```


## Reproduce Figure 2 from the publication
but instead of representing the clusters in the annotation, represent the groups (G1 to G4)

```{r}

```

## Improve figure 2 of the publication
Add a second annotation with information of deathm and a third one with information of gender

```{r}

```


# session info {.unnumbered}

```{r, results='asis',  echo=FALSE, message=FALSE }
sessionInfo()
```
